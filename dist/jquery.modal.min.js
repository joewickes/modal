!function(t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(a){"use strict";var n=function(t,s){this.namespace="modal-"+a.fn.modal2.count,this.$container=a(s.container),this.$selector=t,this.settings=s,this.modalOpen=!1,this.$modal=null,this.$modalInside=null,this.$overlay=null,this.$selector?a(this.$selector).off("click.modal").on("click.modal",a.proxy(this.show,this)):this.show(),a.fn.modal2.count++};n.prototype.addEvents=function(){var s=this;a(this.settings.closeModalName).on("click."+this.namespace,a.proxy(this.close,this)),a(document).on("keydown."+this.namespace,a.proxy(this.close,this)),this.settings.allowCloseOverlay&&this.$modal.on("click."+this.namespace,function(t){a(t.target).closest("."+s.settings.modalContentName).length||s.close()})},n.prototype.removeEvents=function(){a(this.settings.closeModalName).off("."+this.namespace),this.$modalInside.off("."+this.namespace),this.$modal.off("."+this.namespace),a(document).off("."+this.namespace)},n.prototype.show=function(t){"object"==typeof t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation()),this.settings.html?(this.append(this.settings.html),this.open(),this.settings.afterInit.call(this,a(this.$selector))):a(this.$selector).data("target")?(this.append(a(a(this.$selector).data("target")).html()),this.open(),this.settings.afterInit.call(this,a(this.$selector))):this.settings.ajax&&"string"==typeof this.settings.ajax.url?(this.append(),this.load(this.settings.ajax.url),this.settings.afterInit.call(this,a(this.$selector))):a(this.$selector).attr("href")?(this.append(),this.load(a(this.$selector).attr("href")),this.settings.afterInit.call(this,a(this.$selector))):this.close()},n.prototype.close=function(t){var s,e=this,o=!1;if(this.modalOpen){if("object"==typeof t){if(o=t.type,"keydown"===t.type&&(27!==t.keyCode||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey))return;t.preventDefault(),t.stopPropagation()}s=this.$modal.children("."+this.settings.modalDialogName).length,(this.settings.allowClose||"closeModal"===o||"ajaxComplete"===o)&&(this.settings.onBeforeClose.call(this,a(this.$selector)),this.modalOpen=!1,1<s?(this.$modalDialog.prev("."+this.settings.modalDialogName).show(),this.$modalDialog.remove(),this.removeEvents(),this.settings.afterClose.call(this,a(this.$selector))):(this.$overlay.removeClass("show in"),this.$modal.removeClass("show in"),this.$modal.animate({top:-2*this.$modal.outerHeight(!0)},function(){a("body").removeClass("modal-open"),e.$overlay.remove(),e.$modal.remove(),e.removeEvents(),e.settings.afterClose.call(this,a(this.$selector))})))}},n.prototype.load=function(t){var o=this,s=a.extend({},this.settings.ajax);this.$modalInside.addClass("loading"),this.$overlay.addClass("show in"),this.$modal.addClass("show in"),s.success=function(t,s,e){o.$modalInside.empty().append(t),o.open(),"function"==typeof o.settings.ajax.success&&o.settings.ajax.success.call(o,t,s,e)},s.error=function(t,s,e){o.close(),"function"==typeof o.settings.ajax.error&&o.settings.ajax.error.call(o,t,s,e)},s.complete=function(t,s){o.$modalInside.removeClass("loading"),"function"==typeof o.settings.ajax.complete&&o.settings.ajax.complete.call(o,t,s)},a.ajax(s)},n.prototype.open=function(){var t=this;this.modalOpen||(this.modalOpen=!0,1<this.$modal.children("."+this.settings.modalDialogName).length&&(this.$modal.children("."+this.settings.modalDialogName).hide(),this.$modalDialog.show()),this.settings.centered?(this.$overlay.addClass("show in"),this.$modal.addClass("show in")):(this.$modal.css({marginTop:-this.$modal.height()}),setTimeout(function(){t.$overlay.addClass("show in"),t.$modal.css({marginTop:0}).addClass("show in")},10)),this.$container.addClass("modal-open"),this.addEvents(),this.$modal.find("[autofocus]").focus(),this.settings.afterOpen.call(this,a(this.$selector)))},n.prototype.append=function(t){var s=a("."+this.settings.modalName,this.$container),e=a("."+this.settings.backdropName);this.$modal=s.length&&s||a('<div class="'+this.settings.modalName+" modal-"+this.settings.modalSkin+' fade" role="dialog"></div>'),this.$overlay=e.length&&e||a('<div class="'+this.settings.backdropName+' fade"></div>'),this.$modalDialog=a('<div class="'+this.settings.modalDialogName+'" role="document"></div>'),this.$modalInside=a('<div class="'+this.settings.modalContentName+'"></div>'),this.$closeBtn=a(this.settings.closeModalName,this.$modalInside),this.$modalDialog.append(this.$modalInside),this.$modal.append(this.$modalDialog),t&&this.$modalInside.empty().append(t),this.settings.centered&&this.$modal.addClass("modal-centered"),"body"===this.settings.container&&this.$modal.addClass("fixed"),this.settings.width&&this.$modalDialog.css({"max-width":this.settings.width}),this.$container.append(this.$overlay),this.$container.append(this.$modal),this.$overlay.show(),this.$modal.show()};var s=function(t,s){var e=a(t);if((t=e).is(document)&&(t=!1),"object"==typeof s||void 0===s){var o=new n(t,s);e.data("modal",o)}else if("string"==typeof s){var i=e.data("modal");"object"==typeof i&&"close"===s&&a.isFunction(i.close)&&i.close()}};return a.fn.modal2=function(t){return"string"!=typeof t&&(t=a.extend(!0,{},a.fn.modal2.defaults,t)),this.each(function(){return s(this,t),this})},a.modal2=function(t){return"string"!=typeof t&&(t=a.extend(!0,{},a.fn.modal2.defaults,t)),s(document,t),this},a.fn.modal2.count=0,a.fn.modal2.defaults={closeModalName:'[data-dismiss="modal2"]',modalContentName:"modal-content",modalDialogName:"modal-dialog",backdropName:"modal-backdrop",allowCloseOverlay:!0,onBeforeClose:a.noop,modalSkin:"default",modalName:"modal",afterClose:a.noop,container:"body",afterInit:a.noop,afterOpen:a.noop,allowClose:!0,centered:!1,width:!1,html:!1,ajax:!1},a.modal2});