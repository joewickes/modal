!function(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(i){"use strict";function a(t,e){this.namespace="modal-"+i.fn.modal2.count,this.$container=i(e.container),this.$selector=t,this.settings=e,this.staticModal=!1,this.$modalInside=null,this.modalOpen=!1,this.$overlay=null,this.$modal=null,i.fn.modal2.count++,!this.$selector||this.$selector.is("."+e.modalName)?this.show():("body"===e.container&&this.$selector.parents("."+e.modalDialogName).length&&(this.$container=this.$selector.parents("."+e.modalDialogName).first()),i(this.$selector).off("click."+this.namespace).on("click."+this.namespace,i.proxy(this.show,this)))}a.prototype.addEvents=function(){var e=this;this.$modalDialog.on("click."+this.namespace,this.settings.closeModalName,i.proxy(this.close,this)),i(document).on("keydown."+this.namespace,i.proxy(this.close,this)),i(document).on("closeModals."+this.namespace,i.proxy(this.close,this)),this.settings.allowCloseOverlay&&this.$modal.on("click."+this.namespace,function(t){i(t.target).closest("."+e.settings.modalContentName).length||e.close()})},a.prototype.removeEvents=function(){i(document).off("."+this.namespace),this.$modal.off("."+this.namespace),this.$modalDialog.off("."+this.namespace)},a.prototype.show=function(t){return"object"==typeof t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation()),this.$selector?i(this.$selector).is("."+this.settings.modalName)?this.append(!1,i(this.$selector)):i(this.$selector).data("target")?this.append(!1,i(i(this.$selector).data("target")).first()).open():i(this.$selector).attr("href")&&("#"===i(this.$selector).attr("href").substring(0,1)?this.append(!1,i(i(this.$selector).attr("href")).first()).open():this.load(i(this.$selector).attr("href"))):this.settings.html?this.append(this.settings.html).open():this.settings.ajax&&"string"==typeof this.settings.ajax.url&&this.load(this.settings.ajax.url),this.settings.afterInit.call(this,i(this.$selector)),this},a.prototype.close=function(t){var e,s=this,o=!1;if(this.modalOpen){if("object"==typeof t){if(o=t.type,"keydown"===t.type){if(27!==t.keyCode||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return}else if("click"===t.type&&!i(t.currentTarget).closest("."+this.settings.modalName).is(this.$modal))return;t.preventDefault(),t.stopPropagation()}return e=this.$modal.children("."+this.settings.modalDialogName).length,!this.settings.allowClose&&"closeModals"!==o&&"closeModal"!==o&&"ajaxComplete"!==o||(this.settings.onBeforeClose.call(this,i(this.$selector)),this.modalOpen=!1,this.staticModal||e<=1?(this.$overlay.removeClass("show in"),this.$modal.removeClass("show in"),this.$container.children("[data-modal2-active]").length||this.$container.removeClass("modal-open"),this.$modal.animate({top:-2*this.$modal.outerHeight(!0)},function(){s.$modal.removeAttr("data-modal2-active"),s.$modal.css({top:"0"}),s.removeEvents(),s.staticModal?(s.$modal.hide(),s.$overlay.hide()):(s.$modal.remove(),s.$overlay.remove()),s.settings.afterClose.call(s,i(s.$selector))})):(this.$modalDialog.prev("."+this.settings.modalDialogName).show(),this.$modal.removeAttr("data-modal2-active"),this.$modalDialog.remove(),this.removeEvents(),this.settings.afterClose.call(this,i(this.$selector)))),this}},a.prototype.load=function(t){var o=this,e=i.extend({url:t||""},this.settings.ajax);return this.append(),this.$modalInside.addClass("loading"),this.$overlay.addClass("show in"),this.$modal.addClass("show in"),e.error=function(t,e,s){o.close(),"function"==typeof o.settings.ajax.error&&o.settings.ajax.error.call(o,t,e,s)},e.complete=function(t,e){var s=t.responseText;o.$modalInside.removeClass("loading"),s&&(o.$modalInside.empty().append(s),o.open(),"function"==typeof o.settings.ajax.success&&o.settings.ajax.success.call(o,s,e,t)),"function"==typeof o.settings.ajax.complete&&o.settings.ajax.complete.call(o,t,e)},i.ajax(e),this},a.prototype.open=function(){var t=this;if(this.$modal&&!this.modalOpen)return this.modalOpen=!0,1<this.$modal.children("."+this.settings.modalDialogName).length&&(this.$modal.children("."+this.settings.modalDialogName).hide(),this.$modalDialog.show()),this.settings.centered?(this.$overlay.addClass("show in"),this.$modal.addClass("show in")):(this.$modal.css({marginTop:-this.$modal.height()}),setTimeout(function(){t.$overlay.addClass("show"),t.$modal.css({marginTop:0}).addClass("show"),setTimeout(function(){t.$overlay.addClass("in"),t.$modal.addClass("in")},20)},10)),this.addEvents(),this.$container.addClass("modal-open"),this.$modalDialog.find("[autofocus]").focus(),this.$modalDialog.get(0)&&"function"==typeof this.$modalDialog.get(0).scrollIntoView&&this.$modalDialog.get(0).scrollIntoView(),this.settings.afterOpen.call(this,i(this.$selector)),this},a.prototype.append=function(t,e){if(e){this.$modal=e,this.$modalInside=i("."+this.settings.modalContentName,e),this.$modalDialog=i("."+this.settings.modalDialogName,e),this.$overlay=this.$overlay&&this.$overlay.length?this.$overlay:i('<div class="'+this.settings.backdropName+' fade" data-modal2-overlay-active></div>'),this.$modal.before(this.$overlay),this.staticModal=!0;for(var s=0;s<i.fn.modal2.current.length;s++)i.fn.modal2.current[s].modalOpen&&i.fn.modal2.current[s].$modal&&(!this.settings.nestedForcesClose&&(i.fn.modal2.current[s].$modal.is(this.$modal)||i.fn.modal2.current[s].$modal.has(this.$modal))||i.fn.modal2.current[s].close())}else{var o=this.$modal||i("."+this.settings.modalName+"[data-modal2-active]",this.$container).first(),a=this.$overlay||i("."+this.settings.backdropName+"[data-modal2-overlay-active]",this.$container).first();this.$modal=o&&o.length?o:i('<div class="'+this.settings.modalName+" modal-"+this.settings.modalSkin+' fade" role="dialog"></div>'),this.$modalDialog=i('<div class="'+this.settings.modalDialogName+'" role="document"></div>'),this.$modalInside=i('<div class="'+this.settings.modalContentName+'"></div>'),this.$overlay=a&&a.length?a:i('<div class="'+this.settings.backdropName+' fade" data-modal2-overlay-active></div>'),this.$modalDialog.append(this.$modalInside),this.$modal.append(this.$modalDialog),this.$container.append(this.$overlay),this.$container.append(this.$modal)}return t&&(i(t).hasClass("modal-dialog")&&(t=i("."+this.settings.modalContentName,i(t)).html()),this.$modalInside.empty().append(t)),this.settings.centered&&this.$modalDialog.addClass("modal-centered"),"body"===this.settings.container&&this.$modal.addClass("fixed"),this.settings.width&&this.$modalDialog.css({"max-width":this.settings.width}),this.$modal.attr("data-modal2-active",!0),this.$overlay.show(),this.$modal.show(),this};function s(t,e,s){s=i.extend(!0,{},i.fn.modal2.defaults,s);var o=!!(t=!!t&&i(t))&&t.data("modal");if(e)switch("object"!=typeof o&&(o=new a(t,s)),e){case"hide":case"close":i.isFunction(o.close)&&o.close();break;case"open":case"show":i.isFunction(o.open)&&o.open()}else t.is(document)?o=new a(!1,s):"object"!=typeof o&&(o=new a(t,s));return i.fn.modal2.current.push(o),t.data("modal",o),o}return i.fn.modal2=function(t,e){return"object"==typeof t&&(e=t,t=!1),this.each(function(){return s(this,t,e),this})},i.modal2=function(t){return s(document,!1,t)},i.fn.modal2.current=[],i.fn.modal2.count=0,i.fn.modal2.defaults={closeModalName:'[data-dismiss="modal"]',modalContentName:"modal-content",modalDialogName:"modal-dialog",backdropName:"modal-backdrop",nestedForcesClose:!1,allowCloseOverlay:!0,onBeforeClose:i.noop,modalSkin:"default",modalName:"modal",afterClose:i.noop,container:"body",afterInit:i.noop,afterOpen:i.noop,allowClose:!0,centered:!1,width:!1,html:!1,ajax:!1},i.modal2});