!function(t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e=function(e,s){this.namespace="modal-"+t.fn.modal2.count,this.$container=t(s.container),this.$selector=e,this.settings=s,this.modalOpen=!1,this.$modal=null,this.$modalInside=null,this.$overlay=null,this.$selector?t(this.$selector).off("click.modal").on("click.modal",t.proxy(this.show,this)):this.show(),t.fn.modal2.count++};e.prototype.addEvents=function(){var e=this;t(this.settings.closeModalName).on("click."+this.namespace,t.proxy(this.close,this)),t(document).on("keydown."+this.namespace,t.proxy(this.close,this)),this.$modal.on("click."+this.namespace,function(s){t(s.target).parents("."+e.settings.modalContentName).length||e.close()})},e.prototype.removeEvents=function(){t(this.settings.closeModalName).off("."+this.namespace),t(document).off("."+this.namespace),this.$modal.off("."+this.namespace)},e.prototype.show=function(e){"object"==typeof e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),this.settings.html?(this.append(this.settings.html),this.open(),this.settings.afterInit.call(this,t(this.$selector))):t(this.$selector).data("target")?(this.append(t(t(this.$selector).data("target")).html()),this.open(),this.settings.afterInit.call(this,t(this.$selector))):this.settings.ajax&&"string"==typeof this.settings.ajax.url?(this.append(),this.load(this.settings.ajax.url),this.settings.afterInit.call(this,t(this.$selector))):t(this.$selector).attr("href")?(this.append(),this.load(t(this.$selector).attr("href")),this.settings.afterInit.call(this,t(this.$selector))):this.close()},e.prototype.close=function(e){var s=this,o=!1;if(this.modalOpen){if("object"==typeof e){if(o=e.type,"keydown"===e.type&&(27!==e.keyCode||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey))return;e.preventDefault(),e.stopPropagation()}(this.settings.allowClose||"closeModal"===o||"ajaxComplete"===o)&&(this.settings.onBeforeClose.call(this,t(this.$selector)),this.$overlay.removeClass("show"),this.$modal.removeClass("show"),this.modalOpen=!1,this.$modal.animate({top:-2*this.$modal.outerHeight(!0)},function(){t("body").removeClass("modal-open"),s.$overlay.remove(),s.$modal.remove(),s.removeEvents(),s.settings.afterClose.call(this,t(this.$selector))}))}},e.prototype.load=function(e){var s=this,o=t.extend({},this.settings.ajax);this.$modalInside.addClass("loading"),this.$overlay.addClass("show"),this.$modal.addClass("show"),this.$modalInside.css({background:"#fff",maxHeight:"50px",maxWidth:"50px",margin:"0 auto",height:"100%",width:"100%"}),o.headers||(o.headers={}),o.headers["X-Requested-With"]="Modal",o.success=function(t,e,o){s.$modalInside.empty().append(t).css({maxHeight:"2000px",maxWidth:"2000px"}),s.open(),"function"==typeof s.settings.ajax.success&&s.settings.ajax.success.call(s,t,e,o)},o.error=function(t,e,o){s.close(),"function"==typeof s.settings.ajax.error&&s.settings.ajax.error.call(s,t,e,o)},o.complete=function(t,e){s.$modalInside.removeClass("loading"),"function"==typeof s.settings.ajax.complete&&s.settings.ajax.complete.call(s,t,e)},t.ajax(o)},e.prototype.open=function(){var e=this;this.modalOpen||(this.modalOpen=!0,this.settings.centered?(this.$overlay.addClass("show"),this.$modal.addClass("show")):(this.$modal.css({marginTop:-this.$modal.height()}),setTimeout(function(){e.$overlay.addClass("show"),e.$modal.css({marginTop:0}).addClass("show")},10)),this.$container.addClass("modal-open"),this.addEvents(),this.$modal.find("[autofocus]").focus(),this.settings.afterOpen.call(this,t(this.$selector)))},e.prototype.append=function(e){var s=t("."+this.settings.modalName,this.$container);s&&s.length&&s.remove(),s=null,this.$modalDialog=t('<div class="'+this.settings.modalDialogName+'" role="document"></div>'),this.$modalInside=t('<div class="'+this.settings.modalContentName+'"></div>'),this.$overlay=t('<div class="'+this.settings.backdropName+' fade"></div>'),this.$closeBtn=t(this.settings.closeModalName,this.$modalInside),this.$modalDialog.append(this.$modalInside),this.$modal=t('<div class="'+this.settings.modalName+" modal-"+this.settings.modalSkin+' fade" role="dialog"></div>'),this.$modal.append(this.$modalDialog),e&&this.$modalInside.empty().append(e),this.settings.centered&&this.$modal.addClass("modal-centered"),"body"===this.settings.container&&this.$modal.addClass("fixed"),this.settings.width&&this.$modalDialog.css({"max-width":this.settings.width}),this.$container.append(this.$overlay),this.$container.append(this.$modal),this.$overlay.show(),this.$modal.show()};var s=function(s,o){var a=t(s);if((s=a).is(document)&&(s=!1),"object"==typeof o||void 0===o){var i=new e(s,o);a.data("modal",i)}else if("string"==typeof o){var n=a.data("modal");"object"==typeof n&&"close"===o&&t.isFunction(n.close)&&n.close()}};return t.fn.modal2=function(e){return"string"!=typeof e&&(e=t.extend(!0,{},t.fn.modal2.defaults,e)),this.each(function(){return s(this,e),this})},t.modal2=function(e){return"string"!=typeof e&&(e=t.extend(!0,{},t.fn.modal2.defaults,e)),s(document,e),this},t.fn.modal2.count=0,t.fn.modal2.defaults={closeModalName:'[data-dismiss="modal2"]',dataTrigger:'[data-toggle="modal2"]',backdropName:"modal-backdrop",modalDialogName:"modal-dialog",modalContentName:"modal-content",modalSkin:"default",modalName:"modal",container:"body",html:!1,ajax:!1,width:!1,centered:!1,allowClose:!0,afterInit:t.noop,afterOpen:t.noop,afterClose:t.noop,onBeforeClose:t.noop},t.fn.modal2.defaults.dataTrigger&&t(function(){t(t.fn.modal2.defaults.dataTrigger).modal2()}),t.modal2});