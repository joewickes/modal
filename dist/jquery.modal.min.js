!function(t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";var s=function(s,e){this.namespace="modal-"+t.fn.modal2.count,this.$container=t(e.container),this.$selector=s,this.settings=e,this.modalOpen=!1,this.$modal=null,this.$modalInside=null,this.$overlay=null,this.$selector?t(this.$selector).off("click.modal").on("click.modal",t.proxy(this.show,this)):this.show(),t.fn.modal2.count++};s.prototype.addEvents=function(){var s=this;t(this.settings.closeModalName).on("click."+this.namespace,t.proxy(this.close,this)),t(document).on("keydown."+this.namespace,t.proxy(this.close,this)),this.$modal.on("click."+this.namespace,function(e){t(e.target).parents("."+s.settings.modalContentName).length||s.close()})},s.prototype.removeEvents=function(){t(this.settings.closeModalName).off("."+this.namespace),t(document).off("."+this.namespace),this.$modal.off("."+this.namespace)},s.prototype.show=function(s){"object"==typeof s&&s.preventDefault&&(s.preventDefault(),s.stopPropagation()),this.settings.html?(this.append(this.settings.html),this.open(),this.settings.afterInit.call(this,t(this.$selector))):t(this.$selector).data("target")?(this.append(t(t(this.$selector).data("target")).html()),this.open(),this.settings.afterInit.call(this,t(this.$selector))):this.settings.ajax&&"string"==typeof this.settings.ajax.url?(this.append(),this.load(this.settings.ajax.url),this.settings.afterInit.call(this,t(this.$selector))):t(this.$selector).attr("href")?(this.append(),this.load(t(this.$selector).attr("href")),this.settings.afterInit.call(this,t(this.$selector))):this.close()},s.prototype.close=function(s){var e=this,o=!1;if(this.modalOpen){if("object"==typeof s){if(o=s.type,"keydown"===s.type&&(27!==s.keyCode||s.altKey||s.ctrlKey||s.metaKey||s.shiftKey))return;s.preventDefault(),s.stopPropagation()}(this.settings.allowClose||"closeModal"===o||"ajaxComplete"===o)&&(this.settings.onBeforeClose.call(this,t(this.$selector)),this.$overlay.removeClass("show in"),this.$modal.removeClass("show in"),this.modalOpen=!1,this.$modal.animate({top:-2*this.$modal.outerHeight(!0)},function(){t("body").removeClass("modal-open"),e.$overlay.remove(),e.$modal.remove(),e.removeEvents(),e.settings.afterClose.call(this,t(this.$selector))}))}},s.prototype.load=function(s){var e=this,o=t.extend({},this.settings.ajax);this.$modalInside.addClass("loading"),this.$overlay.addClass("show in"),this.$modal.addClass("show in"),this.$modalInside.css({background:"#fff",maxHeight:"50px",maxWidth:"50px",margin:"0 auto",height:"100%",width:"100%"}),o.success=function(t,s,o){e.$modalInside.empty().append(t).css({maxHeight:"2000px",maxWidth:"2000px"}),e.open(),"function"==typeof e.settings.ajax.success&&e.settings.ajax.success.call(e,t,s,o)},o.error=function(t,s,o){e.close(),"function"==typeof e.settings.ajax.error&&e.settings.ajax.error.call(e,t,s,o)},o.complete=function(t,s){e.$modalInside.removeClass("loading"),"function"==typeof e.settings.ajax.complete&&e.settings.ajax.complete.call(e,t,s)},t.ajax(o)},s.prototype.open=function(){var s=this;this.modalOpen||(this.modalOpen=!0,this.settings.centered?(this.$overlay.addClass("show in"),this.$modal.addClass("show in")):(this.$modal.css({marginTop:-this.$modal.height()}),setTimeout(function(){s.$overlay.addClass("show in"),s.$modal.css({marginTop:0}).addClass("show in")},10)),this.$container.addClass("modal-open"),this.addEvents(),this.$modal.find("[autofocus]").focus(),this.settings.afterOpen.call(this,t(this.$selector)))},s.prototype.append=function(s){var e=t("."+this.settings.modalName,this.$container);e&&e.length&&e.remove(),e=null,this.$modalDialog=t('<div class="'+this.settings.modalDialogName+'" role="document"></div>'),this.$modalInside=t('<div class="'+this.settings.modalContentName+'"></div>'),this.$overlay=t('<div class="'+this.settings.backdropName+' fade"></div>'),this.$closeBtn=t(this.settings.closeModalName,this.$modalInside),this.$modalDialog.append(this.$modalInside),this.$modal=t('<div class="'+this.settings.modalName+" modal-"+this.settings.modalSkin+' fade" role="dialog"></div>'),this.$modal.append(this.$modalDialog),s&&this.$modalInside.empty().append(s),this.settings.centered&&this.$modal.addClass("modal-centered"),"body"===this.settings.container&&this.$modal.addClass("fixed"),this.settings.width&&this.$modalDialog.css({"max-width":this.settings.width}),this.$container.append(this.$overlay),this.$container.append(this.$modal),this.$overlay.show(),this.$modal.show()};var e=function(e,o){var i=t(e);if((e=i).is(document)&&(e=!1),"object"==typeof o||void 0===o){var a=new s(e,o);i.data("modal",a)}else if("string"==typeof o){var n=i.data("modal");"object"==typeof n&&"close"===o&&t.isFunction(n.close)&&n.close()}};return t.fn.modal2=function(s){return"string"!=typeof s&&(s=t.extend(!0,{},t.fn.modal2.defaults,s)),this.each(function(){return e(this,s),this})},t.modal2=function(s){return"string"!=typeof s&&(s=t.extend(!0,{},t.fn.modal2.defaults,s)),e(document,s),this},t.fn.modal2.count=0,t.fn.modal2.defaults={closeModalName:'[data-dismiss="modal2"]',backdropName:"modal-backdrop",modalDialogName:"modal-dialog",modalContentName:"modal-content",modalSkin:"default",modalName:"modal",container:"body",html:!1,ajax:!1,width:!1,centered:!1,allowClose:!0,afterInit:t.noop,afterOpen:t.noop,afterClose:t.noop,onBeforeClose:t.noop},t.modal2});